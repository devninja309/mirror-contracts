# What is Mirror Protocol?

The aim of Mirror project is to create a decentralized investment platform that will utilize crytpocurrencies, specifically stablecoins, as collateral for the creation of synthetic assets. By given crypto-familiar investors with another class of financial products to invest in, both use cases and the total market capitalization of corresponding cryptoassets can be expected to exponentially grow. Not only are there operational efficiencies with having cryptocurrency-backed synthetics, but the decentralized nature of the blockchain will futher enable greater access to users who have difficult engaging with the financial world.


## Usage:

The following contracts are available for use. You can view the source code under `src`
and a precompiled wasm ready for deployment under `contract.wasm`. Take a look here:

* [cw20](https://github.com/CosmWasm/cosmwasm-plus/tree/master/contracts/cw20-base) - The erc20 interface with mint/burn features from owner key.
* [mint](./contracts/mint) - Provides threshold based asset whitelisting and holds mint/burn controls over the registerd token contracts.
* [oracle](./contracts/oracle) - Basic implementation of the simple price registeration from the owner key
* [market](./contracts/market) - Provides liquidity pool based swap feature with uniswap-like swap spread determination method.
* [staking](./contracts/staking) - Distributs commissions from the mirror market to mirrot token stakers
* [gov](./contracts/gov) - Goverance contract which execute given execution msg to given contract when the poll is passed

## Development

### Starting a contract

If you want to add a contract, first fork this repo and create a branch for your PR.
I suggest setting it up via [cosmwasm-template](https://github.com/confio/cosmwasm-template):

`cargo generate --git https://github.com/confio/cosmwasm-template.git --name FOO`

Then update the `README.md` to reflect your actual contract (just read the `README.md` in the autogenerated
template - it explains a lot).

### Preparing for merge

Before you merge the code, make sure it builds and passes all tests, both in the package,
and when calling it from the root packages `cargo wasm && cargo test`. This should
show your package is covered by the CI.

There is also quite some useful information in `Development.md` and `Publishing.md` in the newly generated
contract.

You should also prepare a compiled `contract.wasm` before each merge to master.
This is not enforced by the CI (a full build each commit), but should be tested
on merge. See [`cosmwasm-opt`](https://github.com/confio/cosmwasm-opt/blob/master/README.md#usage)
for an explanation of how to make a deterministic build.

```sh
rm contract.wasm
docker run --rm -v $(pwd):/code \
  --mount type=volume,source=$(basename $(pwd))_cache,target=/code/target \
  --mount type=volume,source=registry_cache,target=/usr/local/cargo/registry \
  confio/cosmwasm-opt:0.6.0

# verify output - these should be the same
sha256sum contract.wasm
cat hash.txt
```

If the sha256 hash changes without any code changes, even when compiling on different machines,
or removing those cache volumes, then please submit an issue on [cosmwasm-opt](https://github.com/confio/cosmwasm-opt).

Once you pass these checks, please open a [PR on this repo](https://github.com/CosmWasm/cosmwasm-examples/pulls).